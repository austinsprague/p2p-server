{"version":3,"names":[],"mappings":"","sources":["signup/controllers/signup-controller.js"],"sourcesContent":["(function () {\n  'use strict';\n\n  /**\n   * @ngdoc object\n   * @name signup.controller:SignupCtrl\n   *\n   * @description\n   *\n   */\n  angular\n    .module('signup')\n    .controller('SignupCtrl', SignupCtrl);\n\n  function SignupCtrl($state, SignupService, stripe, $http) {\n    var vm = this;\n    // vm.loggedin = function(){\n    //   console.log(req.user);\n    // }\n    vm.person = SignupService.loggedIn().then(function(user){\n      console.log(req.session);\n      return user\n    });\n    vm.user = {};\n    vm.authUser = SignupService.authUser().then(function(data){\n      console.log(data);\n      return data;\n    })\n    vm.createUser = function(user) {\n      stripe.card.createToken({\n        number: vm.user.ccnumber,\n        cvc: vm.user.cvc,\n        exp_month: vm.user.exp_month,\n        exp_year: vm.user.exp_year\n      }, stripeResponseHandler);\n\n      vm.sendUser = {\n        first_name: vm.user.first_name,\n        last_name: vm.user.last_name,\n        address: vm.user.address,\n        city: vm.user.city,\n        state: vm.user.state,\n        phone_num: vm.user.phone_num,\n        email: vm.user.email,\n        zip: vm.user.zip,\n        token: '',\n        stripe_card_id:''\n      }\n\n      function stripeResponseHandler(status, res) {\n        console.log(res.card.id);\n        vm.sendUser.token = res.id;\n        vm.sendUser.stripe_card_id = res.card.id;\n        $http.post('/api/signup', vm.sendUser)\n          .then(function(data){\n            console.log(data);\n          }, function (err) {\n            console.log(err);\n          });\n        }\n      }\n    }\n}());\n"],"file":"signup/controllers/signup-controller.js","sourceRoot":"/source/"}