{"version":3,"names":[],"mappings":"","sources":["campaign-detail/controllers/campaign-detail-controller.js"],"sourcesContent":["(function () {\n  'use strict';\n\n  /**\n   * @ngdoc object\n   * @name campaignDetail.controller:CampaignDetailCtrl\n   *\n   * @description\n   *\n   */\n  angular\n    .module('campaignDetail')\n    .controller('CampaignDetailCtrl', CampaignDetailCtrl);\n\n  function CampaignDetailCtrl($state, $stateParams, CampaignDetailService, $http, $cookies) {\n    var vm = this;\n    vm.ended = false;\n    vm.funded = false;\n    vm.currentUserId = $cookies.getObject('user') || 84;\n    vm.campaignId = $stateParams.id;\n\n    CampaignDetailService.getProjectsById(vm.campaignId).then(function(data) {\n      vm.projectById = data;\n      vm.campaignUserId = data.user_id;\n      vm.company_name = data.company_name;\n      vm.img_url = data.img_url;\n      vm.pitch = data.pitch;\n      vm.city = data.city;\n      vm.neighborhood = data.neighborhood;\n      vm.target_market = data.target_market;\n      vm.history = data.history;\n      vm.use_of_funds = data.use_of_funds;\n      vm.status = data.status;\n    });\n\n    // setInterval(FetchData(vm.ended),1000);\n\n    vm.campaignEnd = function(){\n      console.log('button clicked');\n      vm.ended = true;\n      vm.funded = true;\n      $http.post('/api/user_projects/' + campaignId + '/transfer')\n      .then(function(data){\n        console.log('posted');\n        return data;\n      })\n    };\n    //   CampaignDetailService.fundCampaign($stateParams.id).then(function(){\n    //     console.log('this is funded');\n    //   });\n    // };\n\n    vm.createUserCharge = function(amount){\n      vm.userCharge = {};\n      vm.userCharge.backer_id = vm.currentUserId;\n      vm.userCharge.proj_id = vm.campaignId;\n      vm.userCharge.amount = amount;\n      vm.userCharge.user_id = vm.campaignUserId;\n      console.log('this is charge object' , vm.userCharge);\n\n\n      $http.post('/api/user_projects/charge/' + vm.campaignId, vm.userCharge)\n      .then(function(user){\n        console.log(user);\n        return user;\n      })\n    }\n  }\n}());\n"],"file":"campaign-detail/controllers/campaign-detail-controller.js","sourceRoot":"/source/"}